function [Y,Xf,Af] = NN_Tm_test2(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 10-Oct-2019 17:26:59.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx30 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx4 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1;1;1;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [0.666666666666667;0.666666666666667;0.666666666666667;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5;0.5];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6373003961832098;2.7553006621861096;1.712738006049725;1.6525601733513626;-2.870395462754642;0.87717849903109657;0.96082137740759499;-2.5992594032950422;2.9385407949514857;1.0142325297644499;-0.56343052181333864;0.77317512705377545;-0.082122947841067856;0.15044791777587302;0.28679329778451423;0.81296130395332256;0.18206888227502119;2.5937023058942281;0.99870639907044989;1.7734543130800633;-1.9336174005324811;-2.8454538438423844;-1.1518887294974447;-1.4692396759518467;1.1564914280735088;-2.5433190915975556;-0.87852093940532394;2.4389416731631739;-1.9595823095908997;1.3651923530858361];
IW1_1 = [-0.026512646355019105 -0.14489786721236239 -0.042226486048300933 0.16440872676475851 -0.076497699894610555 -0.13755523178335868 0.019778441166249106 0.19194754816989706 0.14947887643078714 -0.43605769106204606 0.24411232436554464 0.096036091333389223 -0.15397511993558771 -0.47154107866830897 -0.0515166564247653 0.33241760319599989 -0.25697496377075751 -0.37848339368837747 0.061861658116123236 0.21945922655366387 0.48541115930553053 0.49579555617056736 -0.12183999814016248 -0.48183911001534463 -0.2719532591113385 -0.40600675280705728 0.41290806913717487 -0.13453199129295665 -0.34308160552712252 0.34452799163993431;0.00043198713367330723 -0.01214590433220453 0.0050790959201302416 0.0098565156607497047 0.0060185816705886509 0.17639370171881513 0.32642749471217858 0.75831767359067259 1.1723477235298423 0.49736585035560599 0.2809066345552812 0.072967153878395613 0.11629629727666721 -0.10419570260385685 0.10105004001953892 -0.025638798285689081 0.35949687025420141 -0.22655178342530588 0.19058955439779998 -0.14984718631559116 -0.1190998541729197 0.18236844762543553 -0.018748190717139731 -0.37502823136834551 -0.29639514453505511 0.011637504014567866 -0.0068873666747024118 0.060514077936739581 -0.36544577644610959 -0.30070843429442234;-0.068280682269575607 -0.11809115807923151 -0.12217280945270743 0.16389831177727715 -0.19569236975431312 -0.56862698787707933 -0.28142592964443913 0.48355107680758219 0.75126934896759434 0.048031387431484392 -0.19187300611811425 0.31720540863763741 0.0006571110313886349 0.019912284025939794 0.36716212946910298 -0.36799894669823996 -0.81774392074056468 -0.2374690525857088 -0.2216649526885256 -0.2605790113943226 -0.13277365438635461 0.02525381283917856 0.10357130698793326 0.13097214710400099 0.68046020159421694 -0.024971704565994911 -0.27373175575999681 -0.28811101970371017 0.55742323432301055 0.52212654033290928;0.1552702728329087 0.098817056468852901 0.10921827371209798 -0.39817144084604733 -0.54647759650068484 -0.17706872113745312 -0.39928299954051788 -0.084496348886740291 0.039537825546357382 0.05795146132603729 -0.0097139633921615332 -0.18095496850792755 -0.2303361735772991 0.0097899366067876505 -0.15281177643182864 0.2135805446144011 0.31853080068372575 0.044830771898170627 0.54141853801381734 0.27580624781727753 0.44134699734582533 -0.49411001190035359 0.3256124629147254 0.22589929074624915 0.27351201351179483 -0.10865437213508887 -0.51268795686218094 0.041224862782171044 0.32106722069816412 0.25710797095283766;-0.012013306269304283 0.0022455417387293613 -0.0018782594723853279 -0.023179123487959329 0.017276400348435549 -0.00024708880468182602 -0.0085402404288625316 -0.024509338580242571 0.0054431634091513326 -0.014423479849059484 0.016450997088958332 -0.0056542746467002402 -0.00061186306683607664 -0.012403148086442854 0.015808379981311325 0.016066217374144365 -0.024838794667265976 0.0036479220627392162 0.016938815712468171 -0.051968695882490465 -0.1990715803087649 -0.39720426304993667 -0.7540420104895974 -1.2211401170275551 -0.36179653036519793 -0.14674617073594906 0.023034271703536956 0.04865888015798147 0.27107091606811257 0.30400016317485395;-0.039276441523580112 -0.31828013096920948 -0.24892374424843297 -0.33759612550697504 0.34463331191912278 0.52593276690775415 -0.20677225091560533 -0.26275652710528086 -0.13914672157165281 0.12587232664534487 -0.13501104041065534 0.18403337624667057 0.43349023855222452 -0.42461912078475922 0.165611241480145 0.067084610433432876 0.37706699450217612 -0.68085160634284403 0.071184527479895343 0.520681325530853 0.48037393791943134 0.4242063520531974 -0.21447829525252665 -0.38187842658327659 0.45526044264924748 -0.32380857089006004 -0.09613425837753968 0.16183122058067298 -0.54359165438660395 -0.32679308327140266;-0.3119502162808438 0.14794808954691863 0.35511564250819067 0.59854123763856193 -0.16813912680847748 -0.023461346296665186 0.40382317240782217 -0.11764816978011013 0.40812849351491165 -0.12596059836871445 -0.055891751890319807 0.41653748384677192 -0.44799185768551208 -0.29275303614314546 0.17726594466664689 -0.37698505021281586 -0.38231908712757068 -0.43194918375241476 -0.29759551161779108 -0.15494859768131658 -0.44915326683989504 -0.48847442244011025 -0.014310484492848306 -0.3005124404402153 -0.30379256928000226 0.44707388558100081 -0.20484569499374156 0.23171396590214566 -0.34108829711217875 0.18488555020412459;0.062801687860366648 0.016818025649881812 0.024363142438725699 0.0059082787618947429 -0.049372121566409001 -0.089394529466313863 -0.051624118700845115 -0.049357216677584359 0.051347513709290832 0.076679685387622612 0.044285400184482092 -0.10203383385573696 -0.34294276235822968 -0.93201113409800884 -0.83252481912270782 -0.23676804340357913 -0.33662512176672404 -0.18107308104551956 -0.29017780684562777 -0.12198268718617543 -0.10507288410391172 0.0055788126666283314 0.092767548287778182 -0.065942076196599336 0.10242664163935973 0.21002573839002855 0.021121118994328753 -0.13852547730056253 0.19722383105539532 0.9095413196935892;-0.013036436896773864 -0.012610894764394677 -0.017876739258025392 -0.015778526542666919 0.015892768198069597 -0.017417777666947784 -0.014909780026805873 -0.026365063716792397 0.11051418694957484 0.26929603413839731 0.56406318277810774 1.1360297406216606 0.46105656671686268 0.32770985638950734 -0.28081621781815796 0.073156378534409955 0.21584350339844074 0.14836543823490786 0.36114078349048828 0.18176494336721682 -0.015003519254354534 0.094583332160478151 -0.11576453671621771 -0.44915526627511798 0.059708417625811958 0.090678302461489627 -0.26977177245789541 -0.6305465774234682 0.20216753595085662 -0.056696232757857332;-0.35612600803757627 -0.13497536766670895 -0.13183752083838013 0.022692067595624848 0.38305256435723856 -0.4200698960203092 0.046441055916969606 0.49557670104846563 0.33711004639763636 0.63277648463189418 -0.11874563885770292 -0.5853184119418765 -0.27307659003522544 0.17705359319350311 0.18932495124172602 -0.10096868500168941 0.13261564313314389 -0.24268740972500216 -0.15666943793698615 -0.15675871434828542 -0.28701444414642202 0.1007703524649269 0.35913314568329063 0.37793429089486674 0.17638993309496978 0.01962172342552583 0.29027023434758892 0.28758963872135762 -0.32154077011116655 -0.63296096373829491;-0.024323053159970253 0.14702009589664036 0.25778875557808761 0.18225741225551362 -0.27244732548843442 -0.19850513319030466 -0.30747033371312943 -0.011195953341864743 -0.057879588369781035 -0.13220796291863196 -0.014901427445203111 0.24162834910386241 -0.27107695608523097 -0.20255146877273139 0.19624086040418867 -0.12030359256828042 0.07038318003634822 -0.16910748547133236 -0.39413157800698467 0.22309241544370875 -0.13675207031746373 -0.31767842644403144 -0.049263396432247919 0.29982636085987691 0.43571411922675229 -0.55178473228583713 0.14884738786200774 -0.42814056582419413 -0.40323680527904371 -0.33096026446556054;-0.12083424471061825 -0.19612039225587335 -0.056211081833330387 0.14299003011170905 -0.16433680414604013 0.23823858657882624 0.22360131210102591 -0.17488038382926072 -0.30644336808306777 -0.0029341816074897028 0.087224292579703377 -0.034657366074555149 -0.24931307589370472 0.27496669089196002 0.61487498713024424 0.43538556989582228 -0.7377366627300409 -0.26655889186050696 -0.15331700927333056 -0.058469748534066862 0.14374599435552829 0.1894593049899172 0.23442568209514314 0.21677377248337759 -0.1554412163567146 -0.33549952152226781 0.36945646321735393 -0.41045675812761023 -0.22592038794674002 0.56128127616188006;0.24827461460553138 0.26047017198095934 0.39893604737087834 0.44955847038174618 0.36300366935536732 0.28287347818521796 0.07113628410121188 0.26279491818943518 0.22041892355575798 0.39004502329191909 0.12493792533896825 0.030790166847595227 0.25013646888256635 -0.0022235528067530257 -0.00090928118331106789 0.10875813725954959 0.45146342153715729 0.096846361036954529 -0.066887485313770756 0.39203338797651971 -0.18419411073028344 -0.071020854223606072 0.19400007635588778 0.16023514908265757 -0.048228299456634663 0.080613915707015982 0.085092405534940824 0.50195387918930956 0.49115858799970302 0.27463468865804574;-0.60210056109812959 -0.60153112035238177 -0.39650931495448871 -0.22636361016909851 -0.20738358609842805 -0.047926820569393097 -0.056378532091961635 0.066311087190627532 0.19985104972005499 0.092450912477951411 -0.12211640514829661 0.027726370688396243 0.4898609054042326 0.44530259807784761 0.56374308338807821 0.40595756616103468 -0.28233775141175221 -0.40913812983468273 -0.38834594384150029 -0.16934173738528441 -0.32365905736048656 0.11267168017267967 0.047790003993891578 -0.32213261719853137 -0.28784937140961392 -0.35002715847478039 -0.071896077807725139 0.33802614646959078 -0.054620727087929755 -0.10447871852138244;0.13608496307571949 0.050091149378976491 0.011476828254253342 -0.69447485999019309 -0.079287571578775543 -0.36332262824258482 -0.28689401213863741 -0.25704221104090941 -0.22739859923815123 -0.28774977404261959 -0.12887693728298574 -0.27443976393336844 0.18437280989496421 0.18411223920709008 0.06591643219511141 0.21845750029825373 0.41504139225776676 0.13865655739472699 0.37533935425590914 0.22612647443050107 0.62334856256921978 0.4643496969862097 -0.74639986241023815 0.53970016387565534 -0.51040363001453337 0.096012515044298058 -0.26497737400022731 -0.16774790788967536 -0.061776504132901394 0.10153374308045407;0.0062829346205545353 0.019009392148502009 0.0041551273073645745 -0.18937714545036169 -0.09250113232067686 -0.15838749735883223 -0.032029906012561428 -0.01367078954502105 -0.019998707053393284 -0.0030890267581191577 0.045877237569251661 0.018904855400830714 -0.096849453306227157 0.11397951322220132 -0.051486667598150022 0.15492870300414999 0.56786673824955636 0.51065734581506461 0.43770893296780899 0.4977595358466339 0.21190623140072112 0.16790557616078164 0.087762324296575517 -0.008612773216238781 0.16743356363964407 -0.11325157386612207 -0.099190752510643548 -0.10542684601508305 -0.10470425137591591 -0.43719158831013921;-0.32939917170266297 -0.24275176064977058 0.04679912409884935 -0.03669360708358059 -0.13958345971772074 -0.15851673381559889 -0.080998633906340017 0.2946639763200436 -0.15503326474781565 0.22784013858672311 0.53871953603601164 -0.053607917509439183 0.26658292277109152 0.18821580151893386 -0.12617841059622675 0.15315326699005508 -0.051830747027031332 -0.032016564264118613 0.019569934507251606 -0.2645889712080905 0.0012408209215252447 0.10027583628127416 -0.21890440387840013 -0.2265486657295786 -0.30092669776597614 0.016906223827667731 0.26292605761701315 0.55479299498233992 0.35306995725002577 0.22240698457220617;-0.0011381670971167754 0.0091214011784283271 -0.0020754099792699185 -0.036394370865343216 0.010927915684127498 -0.0037457780277252955 -0.0084064195227045776 -0.022765171995262727 0.0023576646462331375 -0.030392971552617467 0.031119658207443147 -0.0048452976726775397 -0.010536150190498625 -0.010449786603197444 -0.020335870111760138 0.029466319451442541 -0.004870375191622236 -0.009490477176769388 -0.0072630706176643059 -0.011264507864648858 0.014993048668860399 -0.0089179095930953904 -0.021577600519586255 0.16297761225451357 0.22629244588011049 0.43480864610397085 1.0156390980255807 0.66870652292502197 -0.07836630336056559 -0.31201555860811941;-0.055315001600074423 -0.23225244940997566 -0.033821352997124826 0.19789612877751561 0.30000554402771701 0.03464959836538864 0.13638655237529601 0.11881952084171299 -0.42519158559374631 -0.35906631321064642 0.083708433233909932 0.16186593541334765 0.06896643224318369 -0.010953462039920253 -0.096952080489954851 0.23524501869611047 0.24549154373106394 0.3117263008871457 -0.14937636089465645 -0.3969652854689007 -0.18705327559609006 -0.1223861521207837 0.35594300235280935 0.35745683341997408 -0.17112483877558377 -0.1509374435934514 -0.17400861604755377 -0.2853134996656681 0.019749692801209248 0.714955554837156;0.057562227549306823 0.097368715200137332 0.085634438114646314 0.086059981949429723 0.07916144679447612 0.075130951121196651 0.064915012201425842 0.066757323560142814 0.10654976336369129 0.082352645551867137 0.054328061964876426 0.063755528534513717 0.045960886253738842 0.052644439020845542 0.07764840075517658 0.065069362402027445 0.07028355092723565 0.10711419770732881 0.053671547878336029 0.099845188823135547 0.097860964709439807 0.024057602681097086 -0.05987836014481103 0.093472372148592081 0.46496997936113987 0.2578732899966662 -0.14210561045376466 -0.13539183915435277 -0.12960844341953059 0.30074627636692042;-0.0076663807015801382 0.022554838496977467 0.015880826787713395 -0.039551460637902762 -0.003494254199071567 -0.03378680264830377 -0.029498720024417644 -0.0019774000478507696 -0.013615613374179254 -0.033027538388799522 -0.016609507593116996 -0.014806504634149294 -0.022869547656017872 0.011231620247360536 -0.012462051689254294 0.012693411326984812 -0.004617387537403414 -0.014813197931586201 -0.017311602191195194 0.0032375534248299124 0.005612875973739646 -0.024014038828663896 -0.0021875717182753837 0.075723234128631911 0.041599907448303851 -0.013356210664195201 -0.10449027320506517 -0.28430312434705185 -0.46873214508961158 -0.79626043192552809;-0.14033517178792398 -0.11439316562463034 -0.1220618141281169 -0.45012090785644421 -0.91442831181432249 -0.79310941635218402 -0.66983310112465766 -0.070806448702337377 -0.18164550768419974 -0.33245344321376913 -0.0291721170498002 -0.031332152400836803 -0.22262103007572473 0.096459004925574729 0.017771451513450148 0.2092933742441388 -0.36443029462018445 0.29648115471078368 -0.09104271958927028 -0.1185602046217701 -0.098128574901370835 -0.00050418719670959622 -0.059731881155448432 0.15703115358916872 0.1148898795228474 -0.068992226531415526 0.19987444786165862 0.29339494604862276 0.28247275176786013 0.4843089957798335;-0.0077103518717842835 0.10256848220739088 0.050589370410586254 0.12692338426883479 0.15171790349987235 0.077168169603002851 0.26701183911731141 0.036868919781168775 0.26239636088362911 0.15914156922956157 0.17756955766528063 0.54532840421345785 0.29814786983006492 0.26936257669609465 0.56677550118116693 0.19724828127759791 0.10269175230244883 0.12934824097158903 -0.035847061930816361 0.053938560063916743 0.454588720597848 0.032013059879916546 0.28768478759039939 0.093062243060726024 0.11672281900071632 -0.06753516688327349 0.019054536312462567 0.034498550923324968 -0.2550897829711079 -0.0035272044882703737;0.002972231491298858 -0.01882137415297374 -0.028895766245429281 0.02343500125977235 -0.026887002964999247 -0.085164041694134898 -0.051495853504519899 -0.040292329017500697 0.014118705501547445 -0.0046808098282367337 0.086027020563756551 -0.19210385745317612 0.0011676955079518072 0.070830288760685617 -0.043003437080758225 0.048411326828667237 -0.085140163431322163 0.025751098502188194 -0.34799396408961658 -0.23285962545664615 0.64840223398041752 0.12426246136048617 -0.66006575264795375 -0.20973635253611522 -0.19963958939940404 0.046614863054687775 -0.16524197848259786 -0.23441517714044594 0.18632510770748525 0.16941297173379635;-0.0028710079134435847 -0.54738564665523537 -0.19859684760253193 -0.27255431566219901 0.19008791971062525 0.074810811842992028 0.049984953288326292 -0.20033903148869947 -0.58463013251040241 -0.055125819521485833 -0.088492154876416179 -0.031738048660040839 0.035410763610062269 -0.45142360814287064 -0.077512568776761256 -0.17710973914866179 -0.025064731350291043 0.0073976562828780516 -0.042228699167560974 -0.22354063945056971 0.18729599695617977 -0.24447248426945892 -0.067583699101942382 -0.41228627558082614 -0.38407328840388177 -0.24495712237431294 -0.39086182033843908 0.31552326296886751 0.15762456650221057 0.10603003113881221;-0.0059007205569946031 -0.00666862269794616 0.003097246846753718 0.042996917551398367 -0.003010041148371671 0.05125419665656359 -0.002405219738248086 0.0041798024987916554 0.021745611651233041 0.029271417001930835 0.0081884395602044094 0.018607312941573074 0.020561280389304548 -0.013764543407422423 0.037386246103775916 0.0212633227192403 -0.094314797596535827 -0.27172917771894695 -0.44148887211998616 -1.2235091546018557 -0.56682200179885012 -0.1898020008563856 0.10595165456210641 0.06740045895107899 -0.21856848291818939 -0.0054525503217655591 0.2158925593979798 -0.15199218385568228 0.090666717737210675 0.53559576141134624;-0.43598336371744822 -0.13039007880637682 0.043916675640385656 0.2513697468747863 -0.11137883661228702 0.20410049742460268 -0.092176759565333236 0.0090568043121998128 0.068442058872625444 0.072369595355095045 0.22582732010160897 0.23970340625527925 -0.022738342064227646 0.08234492055198657 0.40134805545352575 0.25335985896623164 0.057828151073982342 0.19209504673439737 0.35107313345981345 0.019127721500198553 -0.16363949580398454 0.19618317959201984 0.12861078876061552 0.86113121242739032 0.21102175922220706 0.10790567967846121 0.28094614740028911 -0.039865441520870182 0.09947751687190097 -0.62129203129423793;0.014287314517034263 -0.011743849064175662 -0.011995437230314055 -0.013293648935332246 -0.045596643007362381 0.014748878024562382 -0.061489031174868335 -0.008042640304978187 0.051281337717755698 0.038886431272726965 -0.034176141611981889 -0.05332773173792555 -0.057828104168467738 -0.042464056284598158 0.24923949047494479 0.46787659894700784 0.8323785279824969 0.67278619567796205 0.24968527841201704 0.042943307940227139 0.18769226594095367 0.24996050266048483 0.071427712985049352 -0.49084142965738897 0.077054505639464962 -0.090893729149511687 0.13771136686721819 -0.2789257093171098 -0.20015400678332146 -0.18651985217037265;-0.16764127721590236 -0.032139870292376721 -0.08152082455910209 -0.094104592637310386 0.33782455046125953 0.66894565406392825 0.32017476725610816 0.20133239193936789 -0.084323357510303412 -0.011915857785255351 -0.15735336658999521 -0.17242042417930753 -0.56010863647435416 -0.49486202706875787 -0.13322307922757318 -0.38974359744876497 -0.1371231979171669 -0.11235528817229558 0.096993873036895772 -0.36174443065801387 0.229616144381253 -0.093038469410364394 -0.094105590787242913 0.24871792692203659 -0.23450534512796059 0.11727071952156135 0.17825767229184575 -0.482039407404389 0.23470919234757256 0.51863993319207913;0.3921637605307024 -0.21293131264245174 -0.30973595826107952 -0.14523403871732654 -0.41829165169488608 -0.37885107852258731 -0.50444199520542587 -0.26118152656520227 -0.089316363402805049 0.29344927339298638 0.0019374746305951531 -0.022342567402216136 0.16353831888296977 -0.1970776869515963 0.33379276233227512 0.17356751100762557 -0.46851506606582777 0.0066734007668520752 0.12108196807303674 -0.31909748163178631 -0.27542809891848985 0.33938034023710539 -0.55012404751966271 0.20867565852984529 0.52493721713299402 -0.078955877371064478 0.28912699855441071 0.3036828685666047 -0.43928824125701499 0.18866001371067201];

% Layer 2
b2 = [2.1840971307758958;2.4843659850520625;0.79397813973571296;-0.50241684073964055];
LW2_1 = [0.019912214489378292 -0.32791285471522824 -0.019383337555847171 -0.016651270009038054 0.33835639642336762 -0.0095706424096824502 0.0073469176405593093 0.27099145152076598 -0.33468562141633057 -0.011402576192532885 -0.00045662390979680763 -0.022220589240564272 -0.023036128310069712 0.015022520207848427 -0.01891063836321235 0.059559932316563369 -0.0021976456432931399 -0.36899325843503356 -0.026424768680440847 -0.22879902262236601 0.33417765164874236 0.1534283084313906 -0.014234032995978361 0.03994579122347696 0.018534214208004763 0.36803859395235455 0.020973291095290843 -0.24274548764567772 0.046802434315639838 0.0053439586838209671;0.026928450250431221 -0.38717368873365016 -0.019994188703124732 -0.020364588540993454 0.38755688068935534 -0.0087884841187634236 0.0023565640199120813 0.29578105509147912 -0.3806054705038962 -0.012113100720008898 -0.0098659532496210116 -0.021986321811900279 -0.0087022998464161942 0.012306222085961032 -0.021298621551657917 0.077950334171747043 0.0029599684958660196 -0.42568037577082957 -0.029364213413889013 -0.16812035695526975 0.36053574135571909 0.18988986138223324 0.0043987255702100346 0.038358664093644419 0.0091741893161521072 0.43263756371328166 0.02887297950774053 -0.27910382550131263 0.052706296436228352 0.0028110915620196976;-0.012643651189873671 -0.045733249453575237 -0.014904883895803297 0.00039519067408311194 0.103483134371501 -0.010906439509590103 0.027894261609461173 0.1516288428025464 -0.11680299304241618 -0.0076897238235677321 0.038606576968949209 -0.020292334579726966 -0.077406733389501478 0.026934299395444349 -0.0052613483713172728 -0.03341607766494141 -0.022736275485246295 -0.083621426597789122 -0.010788486767088998 -0.44192833766570588 0.20222476393102112 -0.020032076925178478 -0.089293989731060966 0.041465484845446932 0.056226607506861107 0.043985442574533712 -0.016387300242714974 -0.061602113638946417 0.014975616765095352 0.014236699515004263;0.0060413807612045784 0.21220524522303363 0.0030128500296999739 -0.012976490026311667 0.060986722226608121 0.0038727521522176223 -0.012016689172150005 0.026832356581320441 -0.038301966582130281 -0.0038090987102157533 -0.016524745600310142 0.0092065063517946556 0.021299812975036584 -0.015599188226488231 0.0047928798204449983 0.033202372149760476 0.024813372325498552 -0.11936883870776445 -0.00081743268382064224 0.50451375512415442 -0.01498876057017114 -1.0158080327491639 0.03445600881691456 -0.026885816922883301 -0.018843867207236655 0.12374613950048673 0.013213089571924679 -0.070683816455676812 0.0077189375639585599 -0.010047573707867408];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.00819336337566571;0.00311817898347365;0.0397298371076678;0.0113745510483113];
y1_step1.xoffset = [-253.9;-676.3;-49.34;-81.2509080637542];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
